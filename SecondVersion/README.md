# Вариант 2 - API платформы онлайн курсов

## Модели

**Пользователь**
- Логин
- Пароль
- Роль (клиент, админ)

**Ученик**
- Имя
- Список приобретенных курсов

**Учитель**
- Имя
- Зарплатный счет (decimal)
- Список выпущенных курсов

**Компания**
- Название
- Логотип (URL)
- Список сотрудников

**Курс**
- Название
- Тематика
- Рейтинг
- Описание
- Список модулей
- Автор курса (учитель)

**Модуль**
- Название
- Порядковый номер
- Ссылка на контент (URL)
- Продолжительность


## Методы API
1) _/login_ - вход в систему по логину и паролю. При успешной авторизации возвращать объект IClaimsPrincipal и авторизовать пользователя встроенными методоми ASP.NET
2) /course/post - создать новый курс (обязательные поля "Название", "Тематика", "Компания"). Возвращает информацию о созданном объекте. Доступно только учителям
3) /course/get/all?{theme}&{rating} - получить список курсов (возвращать всю информацию, кроме поля "Список модулей") по заданной тематике и с рейтингом выше заданного (опционально)
4) /course/{courseId}/enroll - записаться на курс с заданным courseId
5) /course/{courseId}/module/add - добавить модуль (обязательные поля "Ссылка на контент", "Название"). Возвращает информацию о созданном объекте. Доступно только админам
6) /course/{courseId}/module/{moduleId} - посмотреть контент модуля. Возвращает ссылку на контент модуля.
7) /course/{courseId}/vote?{score} - поставить курсу оценку
8) /company/teachers/salary?{companyId} - рассчитать зарплату сотрудников

## Особенности реализации
- Логика взаимодействия с курсами и модулями происходит в сервисе курсов
- Логика расчета зарплаты происходит в сервисе компании
- Логика взаимодействия с аутентификацией и авторизацией производится в сервисе пользователя. В случае отсутствия аутентификации выбрасывать код ошибки авторизации
- При получении всех курсов по заданной тематике, рейтинг задавать необязательно. По умолчанию, рейтинг всех курсов больше нуля
- При добавлении нового модуля при отсутствии поля "Порядковый номер", модуль по умолчанию ставится последним в список. Если модуль с заданным порядковым номером существует, то необходимо обновить порядковые номера следующих модулей (приоритет у нового созданного модуля)
- При переходе к конкретному модулю, необходимо проверять, имеет ли пользователь доступ к ресурсу (информацию брать из куки). Удобнее всего оформить в виде фильтра. В случае отсутствия прав возвращать редирект на '/login'
- Формула рассчета зарплаты: 1000 * ((общая продолжительность курса / 160) * количество учеников на курсе) (для каждого курса)